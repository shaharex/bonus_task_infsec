--- galata\test\jupyterlab\workspace.test.ts (old)
+++ galata\test\jupyterlab\workspace.test.ts (new)
@@ -13,15 +13,17 @@
   tmpPath: 'workspace-test',
   waitForApplication: async ({ baseURL }, use, testInfo) => {
     const simpleWait = async (page: Page): Promise<void> => {
-      await page.locator('#jupyterlab-splash').waitFor({ state: 'detached' });
+      await page.waitForSelector('#jupyterlab-splash', {
+        state: 'detached'
+      });
     };
     void use(simpleWait);
   }
 });
 
 test.describe('Workspace', () => {
-  test.beforeAll(async ({ request, tmpPath }) => {
-    const contents = galata.newContentsHelper(request);
+  test.beforeAll(async ({ baseURL, request, tmpPath }) => {
+    const contents = galata.newContentsHelper(baseURL, undefined, request);
     await contents.uploadFile(
       path.resolve(__dirname, `./notebooks/${nbFile}`),
       `${tmpPath}/${nbFile}`
@@ -32,8 +34,8 @@
     );
   });
 
-  test.afterAll(async ({ request, tmpPath }) => {
-    const contents = galata.newContentsHelper(request);
+  test.afterAll(async ({ baseURL, request, tmpPath }) => {
+    const contents = galata.newContentsHelper(baseURL, undefined, request);
     await contents.deleteDirectory(tmpPath);
   });
 
@@ -149,11 +151,9 @@
     ).toBeVisible();
 
     // Wait for the kernel to be ready so it does not unfocus the menu
-    await page.locator('text= | Idle').waitFor();
-
-    const menuItem = await page.menu.getMenuItemLocator(`Tabs>${mdFile}`);
-    expect(menuItem).toBeDefined();
-    expect(menuItem).toBeNull();
+    await page.waitForSelector('text= | Idle');
+
+    await expect(page.menu.getMenuItem(`Tabs>${mdFile}`)).toBeDefined();
   });
 
   test('should clone the default workspace', async ({ page, tmpPath }) => {
@@ -169,7 +169,7 @@
           /api\/workspaces/.test(response.request().url()) &&
           response.request().postDataJSON().data['terminal:1']
       ),
-      page.locator('[role="main"] >> .jp-Terminal').waitFor(),
+      page.waitForSelector('[role="main"] >> .jp-Terminal'),
       page.menu.clickMenuItem('File>New>Terminal')
     ]);
 
@@ -205,7 +205,7 @@
           /api\/workspaces/.test(response.request().url()) &&
           response.request().postDataJSON().data['terminal:1']
       ),
-      page.locator('[role="main"] >> .jp-Terminal').waitFor(),
+      page.waitForSelector('[role="main"] >> .jp-Terminal'),
       page.menu.clickMenuItem('File>New>Terminal')
     ]);
 
@@ -231,8 +231,8 @@
 });
 
 test.describe('Workspace in doc mode', () => {
-  test.beforeAll(async ({ request, tmpPath }) => {
-    const contents = galata.newContentsHelper(request);
+  test.beforeAll(async ({ baseURL, tmpPath }) => {
+    const contents = galata.newContentsHelper(baseURL);
     await contents.uploadFile(
       path.resolve(__dirname, `./notebooks/${nbFile}`),
       `${tmpPath}/${nbFile}`
@@ -243,8 +243,8 @@
     );
   });
 
-  test.afterAll(async ({ request, tmpPath }) => {
-    const contents = galata.newContentsHelper(request);
+  test.afterAll(async ({ baseURL, tmpPath }) => {
+    const contents = galata.newContentsHelper(baseURL);
     await contents.deleteDirectory(tmpPath);
   });
 
@@ -272,30 +272,12 @@
             'running-sessions',
             '@jupyterlab/toc:plugin',
             'extensionmanager.main-view'
-          ],
-          widgetStates: {
-            ['jp-running-sessions']: {
-              sizes: [0.25, 0.25, 0.25, 0.25],
-              expansionStates: [false, false, false, false]
-            },
-            ['extensionmanager.main-view']: {
-              sizes: [
-                0.3333333333333333, 0.3333333333333333, 0.3333333333333333
-              ],
-              expansionStates: [false, false, false]
-            }
-          }
+          ]
         },
         right: {
           collapsed: true,
           visible: true,
-          widgets: ['jp-property-inspector', 'debugger-sidebar'],
-          widgetStates: {
-            ['jp-debugger-sidebar']: {
-              sizes: [0.2, 0.2, 0.2, 0.2, 0.2],
-              expansionStates: [false, false, false, false, false]
-            }
-          }
+          widgets: []
         },
         relativeSizes: [0.4, 0.6, 0],
         top: {