--- galata\test\jupyterlab\notebook-run.test.ts (old)
+++ galata\test\jupyterlab\notebook-run.test.ts (new)
@@ -9,8 +9,8 @@
 test.use({ tmpPath: 'notebook-run-test' });
 
 test.describe.serial('Notebook Run', () => {
-  test.beforeAll(async ({ request, tmpPath }) => {
-    const contents = galata.newContentsHelper(request);
+  test.beforeAll(async ({ baseURL, request, tmpPath }) => {
+    const contents = galata.newContentsHelper(baseURL, undefined, request);
     await contents.uploadFile(
       path.resolve(__dirname, `./notebooks/${fileName}`),
       `${tmpPath}/${fileName}`
@@ -25,8 +25,8 @@
     await page.filebrowser.openDirectory(tmpPath);
   });
 
-  test.afterAll(async ({ request, tmpPath }) => {
-    const contents = galata.newContentsHelper(request);
+  test.afterAll(async ({ baseURL, request, tmpPath }) => {
+    const contents = galata.newContentsHelper(baseURL, undefined, request);
     await contents.deleteDirectory(tmpPath);
   });
 
@@ -43,7 +43,7 @@
 
     await page.notebook.runCellByCell({
       onBeforeScroll: async () => {
-        const nbPanel = await page.notebook.getNotebookInPanelLocator();
+        const nbPanel = await page.notebook.getNotebookInPanel();
         if (nbPanel) {
           captures.push(await nbPanel.screenshot());
           numNBImages++;
@@ -54,12 +54,12 @@
     // Save outputs for the next tests
     await page.notebook.save();
 
-    const nbPanel = await page.notebook.getNotebookInPanelLocator();
-    captures.push(await nbPanel!.screenshot());
+    const nbPanel = await page.notebook.getNotebookInPanel();
+    captures.push(await nbPanel.screenshot());
     numNBImages++;
 
     for (let c = 0; c < numNBImages; ++c) {
-      expect.soft(captures[c]).toMatchSnapshot(getCaptureImageName(c));
+      expect(captures[c]).toMatchSnapshot(getCaptureImageName(c));
     }
   });
 