--- packages\notebook\test\tracker.spec.ts (old)
+++ packages\notebook\test\tracker.spec.ts (new)
@@ -3,13 +3,9 @@
 
 import { Cell } from '@jupyterlab/cells';
 import { Context } from '@jupyterlab/docregistry';
-import { initNotebookContext } from '@jupyterlab/notebook/lib/testutils';
-import { JupyterServer } from '@jupyterlab/testing';
-import {
-  INotebookModel,
-  NotebookPanel,
-  NotebookTracker
-} from '@jupyterlab/notebook';
+import { initNotebookContext } from '@jupyterlab/testutils';
+import { JupyterServer } from '@jupyterlab/testutils/lib/start_jupyter_server';
+import { INotebookModel, NotebookPanel, NotebookTracker } from '..';
 import * as utils from './utils';
 
 const namespace = 'notebook-tracker-test';
@@ -17,8 +13,9 @@
 const server = new JupyterServer();
 
 beforeAll(async () => {
+  jest.setTimeout(20000);
   await server.start();
-}, 30000);
+});
 
 afterAll(async () => {
   await server.shutdown();
@@ -61,7 +58,7 @@
       it('should be `null` if a tracked notebook has no active cell', () => {
         const tracker = new NotebookTracker({ namespace });
         const panel = utils.createNotebookPanel(context);
-        panel.content.model!.sharedModel.clearUndoHistory();
+        panel.content.model!.cells.clear();
         void tracker.add(panel);
         expect(tracker.activeCell).toBeNull();
       });