--- packages\console\test\utils.ts (old)
+++ packages\console\test\utils.ts (new)
@@ -1,38 +1,15 @@
 // Copyright (c) Jupyter Development Team.
 // Distributed under the terms of the Modified BSD License.
 
-import { IYText } from '@jupyter/ydoc';
-import {
-  CodeMirrorEditorFactory,
-  CodeMirrorMimeTypeService,
-  EditorExtensionRegistry,
-  EditorLanguageRegistry,
-  ybinding
-} from '@jupyterlab/codemirror';
-import { CodeConsole, ConsolePanel } from '@jupyterlab/console';
-import { defaultRenderMime } from '@jupyterlab/rendermime/lib/testutils';
+import { editorServices } from '@jupyterlab/codemirror';
+import { defaultRenderMime } from '@jupyterlab/testutils';
+import { CodeConsole, ConsolePanel } from '../src';
 
-const languages = new EditorLanguageRegistry();
-const extensions = (() => {
-  const registry = new EditorExtensionRegistry();
-  registry.addExtension({
-    name: 'binding',
-    factory: ({ model }) => {
-      const sharedModel = model.sharedModel as IYText;
-      return EditorExtensionRegistry.createImmutableExtension([
-        ybinding({ ytext: sharedModel.ysource })
-      ]);
-    }
-  });
+export const editorFactory = editorServices.factoryService.newInlineEditor.bind(
+  editorServices.factoryService
+);
 
-  return registry;
-})();
-const factoryService = new CodeMirrorEditorFactory({ extensions, languages });
-
-export const editorFactory =
-  factoryService.newInlineEditor.bind(factoryService);
-
-export const mimeTypeService = new CodeMirrorMimeTypeService(languages);
+export const mimeTypeService = editorServices.mimeTypeService;
 
 export const rendermime = defaultRenderMime();
 