--- packages\console\test\panel.spec.ts (old)
+++ packages\console\test\panel.spec.ts (new)
@@ -1,20 +1,17 @@
 // Copyright (c) Jupyter Development Team.
 // Distributed under the terms of the Modified BSD License.
 
-import { createSimpleSessionContext } from '@jupyterlab/docregistry/lib/testutils';
-import { ServiceManagerMock } from '@jupyterlab/services/lib/testutils';
-import { CodeConsole, ConsolePanel } from '@jupyterlab/console';
-import { dismissDialog } from '@jupyterlab/testing';
+import { dismissDialog } from '@jupyterlab/testutils';
+import * as Mock from '@jupyterlab/testutils/lib/mock';
 import { Message, MessageLoop } from '@lumino/messaging';
 import { Widget } from '@lumino/widgets';
+import { CodeConsole, ConsolePanel } from '../src';
 import {
   createConsolePanelFactory,
   editorFactory,
   mimeTypeService,
   rendermime
 } from './utils';
-import { Drive } from '@jupyterlab/services';
-import { UUID } from '@lumino/coreutils';
 
 class TestPanel extends ConsolePanel {
   methods: string[] = [];
@@ -33,49 +30,34 @@
 const contentFactory = createConsolePanelFactory();
 
 describe('console/panel', () => {
+  let panel: TestPanel;
+  const manager = new Mock.ServiceManagerMock();
+
+  beforeAll(async () => {
+    return await manager.ready;
+  });
+
+  beforeEach(() => {
+    panel = new TestPanel({
+      manager,
+      contentFactory,
+      rendermime,
+      mimeTypeService,
+      sessionContext: Mock.createSimpleSessionContext()
+    });
+  });
+
+  afterEach(() => {
+    panel.dispose();
+  });
+
   describe('ConsolePanel', () => {
-    let panel: TestPanel;
-    const manager = new ServiceManagerMock();
-
-    beforeAll(async () => {
-      return await manager.ready;
-    });
-
-    beforeEach(() => {
-      panel = new TestPanel({
-        manager,
-        contentFactory,
-        rendermime,
-        mimeTypeService,
-        sessionContext: createSimpleSessionContext()
-      });
-    });
-
-    afterEach(() => {
-      panel.dispose();
-    });
-
     describe('#constructor()', () => {
       it('should create a new console panel', () => {
         expect(panel).toBeInstanceOf(ConsolePanel);
         expect(Array.from(panel.node.classList)).toEqual(
           expect.arrayContaining(['jp-ConsolePanel'])
         );
-      });
-
-      it('should set the session context path to local path', () => {
-        manager.contents.addDrive(new Drive({ name: 'TestDrive' }));
-        const localPath = `${UUID.uuid4()}.txt`;
-        const panel = new TestPanel({
-          manager,
-          contentFactory,
-          rendermime,
-          mimeTypeService,
-          path: `TestDrive:${localPath}`
-        });
-
-        expect(panel.sessionContext.path).toEqual(localPath);
-        panel.dispose();
       });
     });
 
@@ -104,9 +86,7 @@
       it('should start the session', async () => {
         Widget.attach(panel, document.body);
         await panel.sessionContext.ready;
-        await expect(
-          panel.sessionContext.session!.kernel!.info
-        ).resolves.not.toThrow();
+        await panel.sessionContext.session!.kernel!.info;
       });
     });
 
@@ -114,7 +94,7 @@
       it('should give the focus to the console prompt', () => {
         Widget.attach(panel, document.body);
         MessageLoop.sendMessage(panel, Widget.Msg.ActivateRequest);
-        expect(panel.console.promptCell!.editor!.hasFocus()).toBe(true);
+        expect(panel.console.promptCell!.editor.hasFocus()).toBe(true);
         return dismissDialog();
       });
     });