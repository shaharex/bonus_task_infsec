--- packages\mainmenu\src\run.ts (old)
+++ packages\mainmenu\src\run.ts (new)
@@ -2,16 +2,20 @@
 // Distributed under the terms of the Modified BSD License.
 
 import { IRankedMenu, RankedMenu } from '@jupyterlab/ui-components';
-import { SemanticCommand } from '@jupyterlab/apputils';
+import { Widget } from '@lumino/widgets';
+import { IMenuExtender } from './tokens';
 
 /**
  * An interface for a Run menu.
  */
 export interface IRunMenu extends IRankedMenu {
   /**
-   * Semantic commands ICodeRunner for the Run menu.
+   * A set storing ICodeRunner for the Run menu.
+   *
+   * ### Notes
+   * The key for the set may be used in menu labels.
    */
-  readonly codeRunners: IRunMenu.ICodeRunner;
+  readonly codeRunners: Set<IRunMenu.ICodeRunner<Widget>>;
 }
 
 /**
@@ -23,17 +27,24 @@
    */
   constructor(options: IRankedMenu.IOptions) {
     super(options);
-    this.codeRunners = {
-      restart: new SemanticCommand(),
-      run: new SemanticCommand(),
-      runAll: new SemanticCommand()
-    };
+    this.codeRunners = new Set<IRunMenu.ICodeRunner<Widget>>();
   }
 
   /**
-   * Semantic commands ICodeRunner for the Run menu.
+   * A set storing ICodeRunner for the Run menu.
+   *
+   * ### Notes
+   * The key for the set may be used in menu labels.
    */
-  readonly codeRunners: IRunMenu.ICodeRunner;
+  readonly codeRunners: Set<IRunMenu.ICodeRunner<Widget>>;
+
+  /**
+   * Dispose of the resources held by the run menu.
+   */
+  dispose(): void {
+    this.codeRunners.clear();
+    super.dispose();
+  }
 }
 
 /**
@@ -44,18 +55,69 @@
    * An object that runs code, which may be
    * registered with the Run menu.
    */
-  export interface ICodeRunner {
+  export interface ICodeRunner<T extends Widget> extends IMenuExtender<T> {
     /**
-     * A semantic command to run a subpart of a document.
+     * Return the caption associated to the `run` function.
+     *
+     * This function receives the number of items `n` to be able to provided
+     * correct pluralized forms of translations.
      */
-    run: SemanticCommand;
+    runCaption?: (n: number) => string;
+
     /**
-     * A semantic command to run a whole document
+     * Return the label associated to the `run` function.
+     *
+     * This function receives the number of items `n` to be able to provided
+     * correct pluralized forms of translations.
      */
-    runAll: SemanticCommand;
+    runLabel?: (n: number) => string;
+
     /**
-     * A semantic command to restart a kernel
+     * Return the caption associated to the `runAll` function.
+     *
+     * This function receives the number of items `n` to be able to provided
+     * correct pluralized forms of translations.
      */
-    restart: SemanticCommand;
+    runAllCaption?: (n: number) => string;
+
+    /**
+     * Return the label associated to the `runAll` function.
+     *
+     * This function receives the number of items `n` to be able to provided
+     * correct pluralized forms of translations.
+     */
+    runAllLabel?: (n: number) => string;
+
+    /**
+     * Return the caption associated to the `restartAndRunAll` function.
+     *
+     * This function receives the number of items `n` to be able to provided
+     * correct pluralized forms of translations.
+     */
+    restartAndRunAllCaption?: (n: number) => string;
+
+    /**
+     * Return the label associated to the `restartAndRunAll` function.
+     *
+     * This function receives the number of items `n` to be able to provided
+     * correct pluralized forms of translations.
+     */
+    restartAndRunAllLabel?: (n: number) => string;
+
+    /**
+     * A function to run a chunk of code.
+     */
+    run?: (widget: T) => Promise<void>;
+
+    /**
+     * A function to run the entirety of the code hosted by the widget.
+     */
+    runAll?: (widget: T) => Promise<void>;
+
+    /**
+     * A function to restart and run all the code hosted by the widget, which
+     * returns a promise of whether the action was performed.
+     */
+    restartAndRunAll?: (widget: T) => Promise<boolean>;
   }
 }