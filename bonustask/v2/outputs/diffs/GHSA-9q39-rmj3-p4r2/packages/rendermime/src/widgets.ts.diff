--- packages\rendermime\src\widgets.ts (old)
+++ packages\rendermime\src\widgets.ts (new)
@@ -17,8 +17,7 @@
  */
 export abstract class RenderedCommon
   extends Widget
-  implements IRenderMime.IRenderer
-{
+  implements IRenderMime.IRenderer {
   /**
    * Construct a new rendered common widget.
    *
@@ -30,9 +29,8 @@
     this.sanitizer = options.sanitizer;
     this.resolver = options.resolver;
     this.linkHandler = options.linkHandler;
-    this.translator = options.translator ?? nullTranslator;
+    this.translator = options.translator || nullTranslator;
     this.latexTypesetter = options.latexTypesetter;
-    this.markdownParser = options.markdownParser ?? null;
     this.node.dataset['mimeType'] = this.mimeType;
   }
 
@@ -60,11 +58,6 @@
    * The latexTypesetter.
    */
   readonly latexTypesetter: IRenderMime.ILatexTypesetter | null;
-
-  /**
-   * The markdownParser.
-   */
-  readonly markdownParser: IRenderMime.IMarkdownParser | null;
 
   /**
    * The translator.
@@ -126,7 +119,7 @@
    *
    * @param fragment - The URI fragment identifier.
    */
-  protected setFragment(fragment: string): void {
+  protected setFragment(fragment: string) {
     /* no-op */
   }
 }
@@ -145,7 +138,7 @@
     this.addClass('jp-RenderedHTMLCommon');
   }
 
-  setFragment(fragment: string): void {
+  setFragment(fragment: string) {
     let el;
     try {
       el = this.node.querySelector(
@@ -184,7 +177,7 @@
    * @returns A promise which resolves when rendering is complete.
    */
   render(model: IRenderMime.IMimeModel): Promise<void> {
-    return (this._rendered = renderers.renderHTML({
+    return renderers.renderHTML({
       host: this.node,
       source: String(model.data[this.mimeType]),
       trusted: model.trusted,
@@ -194,24 +187,17 @@
       shouldTypeset: this.isAttached,
       latexTypesetter: this.latexTypesetter,
       translator: this.translator
-    }));
+    });
   }
 
   /**
    * A message handler invoked on an `'after-attach'` message.
    */
   onAfterAttach(msg: Message): void {
-    this._rendered
-      .then(() => {
-        if (this.latexTypesetter) {
-          this.latexTypesetter.typeset(this.node);
-        }
-      })
-      .catch(console.warn);
-  }
-
-  // A promise which resolves when most recent rendering is complete.
-  private _rendered: Promise<void> = Promise.resolve();
+    if (this.latexTypesetter) {
+      this.latexTypesetter.typeset(this.node);
+    }
+  }
 }
 
 /**
@@ -236,29 +222,22 @@
    * @returns A promise which resolves when rendering is complete.
    */
   render(model: IRenderMime.IMimeModel): Promise<void> {
-    return (this._rendered = renderers.renderLatex({
+    return renderers.renderLatex({
       host: this.node,
       source: String(model.data[this.mimeType]),
       shouldTypeset: this.isAttached,
       latexTypesetter: this.latexTypesetter
-    }));
+    });
   }
 
   /**
    * A message handler invoked on an `'after-attach'` message.
    */
   onAfterAttach(msg: Message): void {
-    this._rendered
-      .then(() => {
-        if (this.latexTypesetter) {
-          this.latexTypesetter.typeset(this.node);
-        }
-      })
-      .catch(console.warn);
-  }
-
-  // A promise which resolves when most recent rendering is complete.
-  private _rendered: Promise<void> = Promise.resolve();
+    if (this.latexTypesetter) {
+      this.latexTypesetter.typeset(this.node);
+    }
+  }
 }
 
 /**
@@ -320,7 +299,7 @@
    * @returns A promise which resolves when rendering is complete.
    */
   render(model: IRenderMime.IMimeModel): Promise<void> {
-    return (this._rendered = renderers.renderMarkdown({
+    return renderers.renderMarkdown({
       host: this.node,
       source: String(model.data[this.mimeType]),
       trusted: model.trusted,
@@ -329,9 +308,8 @@
       linkHandler: this.linkHandler,
       shouldTypeset: this.isAttached,
       latexTypesetter: this.latexTypesetter,
-      markdownParser: this.markdownParser,
       translator: this.translator
-    }));
+    });
   }
 
   /**
@@ -349,17 +327,10 @@
    * A message handler invoked on an `'after-attach'` message.
    */
   onAfterAttach(msg: Message): void {
-    this._rendered
-      .then(() => {
-        if (this.latexTypesetter) {
-          this.latexTypesetter.typeset(this.node);
-        }
-      })
-      .catch(console.warn);
-  }
-
-  // A promise which resolves when most recent rendering is complete.
-  private _rendered: Promise<void> = Promise.resolve();
+    if (this.latexTypesetter) {
+      this.latexTypesetter.typeset(this.node);
+    }
+  }
 }
 
 /**
@@ -387,30 +358,23 @@
     const metadata = model.metadata[this.mimeType] as
       | ReadonlyJSONObject
       | undefined;
-    return (this._rendered = renderers.renderSVG({
+    return renderers.renderSVG({
       host: this.node,
       source: String(model.data[this.mimeType]),
       trusted: model.trusted,
       unconfined: metadata && (metadata.unconfined as boolean | undefined),
       translator: this.translator
-    }));
+    });
   }
 
   /**
    * A message handler invoked on an `'after-attach'` message.
    */
   onAfterAttach(msg: Message): void {
-    this._rendered
-      .then(() => {
-        if (this.latexTypesetter) {
-          this.latexTypesetter.typeset(this.node);
-        }
-      })
-      .catch(console.warn);
-  }
-
-  // A promise which resolves when most recent rendering is complete.
-  private _rendered: Promise<void> = Promise.resolve();
+    if (this.latexTypesetter) {
+      this.latexTypesetter.typeset(this.node);
+    }
+  }
 }
 
 /**
@@ -439,24 +403,6 @@
       host: this.node,
       sanitizer: this.sanitizer,
       source: String(model.data[this.mimeType]),
-      translator: this.translator
-    });
-  }
-}
-
-export class RenderedError extends RenderedCommon {
-  constructor(options: IRenderMime.IRendererOptions) {
-    super(options);
-    this.addClass('jp-RenderedText');
-  }
-
-  render(model: IRenderMime.IMimeModel): Promise<void> {
-    return renderers.renderError({
-      host: this.node,
-      sanitizer: this.sanitizer,
-      source: String(model.data[this.mimeType]),
-      linkHandler: this.linkHandler,
-      resolver: this.resolver,
       translator: this.translator
     });
   }