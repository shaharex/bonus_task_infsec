--- packages\codemirror\src\mimetype.ts (old)
+++ packages\codemirror\src\mimetype.ts (new)
@@ -4,35 +4,27 @@
 import { IEditorMimeTypeService } from '@jupyterlab/codeeditor';
 import { PathExt } from '@jupyterlab/coreutils';
 import * as nbformat from '@jupyterlab/nbformat';
-import { IEditorLanguageRegistry } from './token';
+import { Mode } from './mode';
 
 /**
  * The mime type service for CodeMirror.
  */
 export class CodeMirrorMimeTypeService implements IEditorMimeTypeService {
-  constructor(protected languages: IEditorLanguageRegistry) {}
   /**
    * Returns a mime type for the given language info.
    *
    * #### Notes
    * If a mime type cannot be found returns the default mime type `text/plain`, never `null`.
-   * There may be more than one mime type, but only the first one will be returned.
-   * To access all mime types, use `IEditorLanguageRegistry` instead.
    */
   getMimeTypeByLanguage(info: nbformat.ILanguageInfoMetadata): string {
     const ext = info.file_extension || '';
-    const mode = this.languages.findBest(
+    return Mode.findBest(
       (info.codemirror_mode as any) || {
         mimetype: info.mimetype,
         name: info.name,
         ext: [ext.split('.').slice(-1)[0]]
       }
-    );
-    return mode
-      ? Array.isArray(mode.mime)
-        ? mode.mime[0] ?? IEditorMimeTypeService.defaultMimeType
-        : mode.mime
-      : IEditorMimeTypeService.defaultMimeType;
+    ).mime as string;
   }
 
   /**
@@ -40,8 +32,6 @@
    *
    * #### Notes
    * If a mime type cannot be found returns the default mime type `text/plain`, never `null`.
-   * There may be more than one mime type, but only the first one will be returned.
-   * To access all mime types, use `IEditorLanguageRegistry` instead.
    */
   getMimeTypeByFilePath(path: string): string {
     const ext = PathExt.extname(path);
@@ -50,11 +40,7 @@
     } else if (ext === '.md') {
       return 'text/x-ipythongfm';
     }
-    const mode = this.languages.findByFileName(path);
-    return mode
-      ? Array.isArray(mode.mime)
-        ? mode.mime[0] ?? IEditorMimeTypeService.defaultMimeType
-        : mode.mime
-      : IEditorMimeTypeService.defaultMimeType;
+    const mode = Mode.findByFileName(path) || Mode.findBest('');
+    return mode.mime as string;
   }
 }