--- packages\csvviewer\src\widget.ts (old)
+++ packages\csvviewer\src\widget.ts (new)
@@ -9,11 +9,18 @@
   IDocumentWidget
 } from '@jupyterlab/docregistry';
 import { PromiseDelegate } from '@lumino/coreutils';
-import type * as DataGridModule from '@lumino/datagrid';
+import {
+  BasicKeyHandler,
+  BasicMouseHandler,
+  BasicSelectionModel,
+  CellRenderer,
+  DataGrid,
+  TextRenderer
+} from '@lumino/datagrid';
 import { Message } from '@lumino/messaging';
 import { ISignal, Signal } from '@lumino/signaling';
 import { PanelLayout, Widget } from '@lumino/widgets';
-import type * as DSVModelModule from './model';
+import { DSVModel } from './model';
 import { CSVDelimiter } from './toolbar';
 
 /**
@@ -50,7 +57,7 @@
   /**
    * horizontalAlignment of the text
    */
-  horizontalAlignment: DataGridModule.TextRenderer.HorizontalAlignment;
+  horizontalAlignment: TextRenderer.HorizontalAlignment;
 }
 
 /**
@@ -60,7 +67,7 @@
  * to set the background color of cells matching the search text.
  */
 export class GridSearchService {
-  constructor(grid: DataGridModule.DataGrid) {
+  constructor(grid: DataGrid) {
     this._grid = grid;
     this._query = null;
     this._row = 0;
@@ -81,7 +88,7 @@
    */
   cellBackgroundColorRendererFunc(
     config: TextRenderConfig
-  ): DataGridModule.CellRenderer.ConfigFunc<string> {
+  ): CellRenderer.ConfigFunc<string> {
     return ({ value, row, column }) => {
       if (this._query) {
         if ((value as string).match(this._query)) {
@@ -209,7 +216,7 @@
     return this._query;
   }
 
-  private _grid: DataGridModule.DataGrid;
+  private _grid: DataGrid;
   private _query: RegExp | null;
   private _row: number;
   private _column: number;
@@ -227,29 +234,11 @@
   constructor(options: CSVViewer.IOptions) {
     super();
 
-    this._context = options.context;
-    this.layout = new PanelLayout();
+    const context = (this._context = options.context);
+    const layout = (this.layout = new PanelLayout());
 
     this.addClass(CSV_CLASS);
 
-    this._ready = this.initialize();
-  }
-
-  /**
-   * Promise which resolves when the content is ready.
-   */
-  get ready(): Promise<void> {
-    return this._ready;
-  }
-
-  protected async initialize(): Promise<void> {
-    const layout = this.layout as PanelLayout;
-    if (this.isDisposed || !layout) {
-      return;
-    }
-    const { BasicKeyHandler, BasicMouseHandler, DataGrid } =
-      await Private.ensureDataGrid();
-    this._defaultStyle = DataGrid.defaultStyle;
     this._grid = new DataGrid({
       defaultSizes: {
         rowHeight: 24,
@@ -274,15 +263,16 @@
     this._searchService = new GridSearchService(this._grid);
     this._searchService.changed.connect(this._updateRenderer, this);
 
-    await this._context.ready;
-    await this._updateGrid();
-    this._revealed.resolve(undefined);
-    // Throttle the rendering rate of the widget.
-    this._monitor = new ActivityMonitor({
-      signal: this._context.model.contentChanged,
-      timeout: RENDER_TIMEOUT
+    void this._context.ready.then(() => {
+      this._updateGrid();
+      this._revealed.resolve(undefined);
+      // Throttle the rendering rate of the widget.
+      this._monitor = new ActivityMonitor({
+        signal: context.model.contentChanged,
+        timeout: RENDER_TIMEOUT
+      });
+      this._monitor.activityStopped.connect(this._updateGrid, this);
     });
-    this._monitor.activityStopped.connect(this._updateGrid, this);
   }
 
   /**
@@ -310,17 +300,17 @@
       return;
     }
     this._delimiter = value;
-    void this._updateGrid();
+    this._updateGrid();
   }
 
   /**
    * The style used by the data grid.
    */
-  get style(): DataGridModule.DataGrid.Style {
+  get style(): DataGrid.Style {
     return this._grid.style;
   }
-  set style(value: DataGridModule.DataGrid.Style) {
-    this._grid.style = { ...this._defaultStyle, ...value };
+  set style(value: DataGrid.Style) {
+    this._grid.style = value;
   }
 
   /**
@@ -328,7 +318,7 @@
    */
   set rendererConfig(rendererConfig: TextRenderConfig) {
     this._baseRenderer = rendererConfig;
-    void this._updateRenderer();
+    this._updateRenderer();
   }
 
   /**
@@ -366,12 +356,10 @@
   /**
    * Create the model for the grid.
    */
-  private async _updateGrid(): Promise<void> {
-    const { BasicSelectionModel } = await Private.ensureDataGrid();
-    const { DSVModel } = await Private.ensureDSVModel();
+  private _updateGrid(): void {
     const data: string = this._context.model.toString();
     const delimiter = this._delimiter;
-    const oldModel = this._grid.dataModel as DSVModelModule.DSVModel;
+    const oldModel = this._grid.dataModel as DSVModel;
     const dataModel = (this._grid.dataModel = new DSVModel({
       data,
       delimiter
@@ -385,17 +373,17 @@
   /**
    * Update the renderer for the grid.
    */
-  private async _updateRenderer(): Promise<void> {
+  private _updateRenderer(): void {
     if (this._baseRenderer === null) {
       return;
     }
-    const { TextRenderer } = await Private.ensureDataGrid();
     const rendererConfig = this._baseRenderer;
     const renderer = new TextRenderer({
       textColor: rendererConfig.textColor,
       horizontalAlignment: rendererConfig.horizontalAlignment,
-      backgroundColor:
-        this._searchService.cellBackgroundColorRendererFunc(rendererConfig)
+      backgroundColor: this._searchService.cellBackgroundColorRendererFunc(
+        rendererConfig
+      )
     });
     this._grid.cellRenderers.update({
       body: renderer,
@@ -406,15 +394,15 @@
   }
 
   private _context: DocumentRegistry.Context;
-  private _grid: DataGridModule.DataGrid;
-  private _defaultStyle: typeof DataGridModule.DataGrid.defaultStyle;
+  private _grid: DataGrid;
   private _searchService: GridSearchService;
-  private _monitor: ActivityMonitor<DocumentRegistry.IModel, void> | null =
-    null;
+  private _monitor: ActivityMonitor<
+    DocumentRegistry.IModel,
+    void
+  > | null = null;
   private _delimiter = ',';
   private _revealed = new PromiseDelegate<void>();
   private _baseRenderer: TextRenderConfig | null = null;
-  private _ready: Promise<void>;
 }
 
 /**
@@ -484,6 +472,14 @@
      * Data delimiter character
      */
     delimiter?: string;
+  }
+}
+
+namespace Private {
+  export function createContent(
+    context: DocumentRegistry.IContext<DocumentRegistry.IModel>
+  ): CSVViewer {
+    return new CSVViewer({ context });
   }
 }
 
@@ -539,33 +535,3 @@
     });
   }
 }
-
-namespace Private {
-  let gridLoaded: PromiseDelegate<typeof DataGridModule> | null = null;
-  let modelLoaded: PromiseDelegate<typeof DSVModelModule> | null = null;
-
-  /**
-   * Lazily load the datagrid module when the first grid is requested.
-   */
-  export async function ensureDataGrid(): Promise<typeof DataGridModule> {
-    if (gridLoaded == null) {
-      gridLoaded = new PromiseDelegate();
-      gridLoaded.resolve(await import('@lumino/datagrid'));
-    }
-    return gridLoaded.promise;
-  }
-
-  export async function ensureDSVModel(): Promise<typeof DSVModelModule> {
-    if (modelLoaded == null) {
-      modelLoaded = new PromiseDelegate();
-      modelLoaded.resolve(await import('./model'));
-    }
-    return modelLoaded.promise;
-  }
-
-  export function createContent(
-    context: DocumentRegistry.IContext<DocumentRegistry.IModel>
-  ): CSVViewer {
-    return new CSVViewer({ context });
-  }
-}