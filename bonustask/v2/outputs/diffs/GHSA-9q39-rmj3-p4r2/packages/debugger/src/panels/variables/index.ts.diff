--- packages\debugger\src\panels\variables\index.ts (old)
+++ packages\debugger\src\panels\variables\index.ts (new)
@@ -1,52 +1,52 @@
 // Copyright (c) Jupyter Development Team.
 // Distributed under the terms of the Modified BSD License.
 
-import { IThemeManager } from '@jupyterlab/apputils';
+import { IThemeManager, ToolbarButton } from '@jupyterlab/apputils';
+
 import { ITranslator, nullTranslator } from '@jupyterlab/translation';
-import {
-  PanelWithToolbar,
-  tableRowsIcon,
-  ToolbarButton,
-  treeViewIcon
-} from '@jupyterlab/ui-components';
+
+import { tableRowsIcon, treeViewIcon } from '@jupyterlab/ui-components';
+
 import { CommandRegistry } from '@lumino/commands';
+
 import { Panel, Widget } from '@lumino/widgets';
+
 import { IDebugger } from '../../tokens';
+
 import { VariablesBodyGrid } from './grid';
+
+import { VariablesHeader } from './header';
+
 import { ScopeSwitcher } from './scope';
+
 import { VariablesBodyTree } from './tree';
 
 /**
  * A Panel to show a variable explorer.
  */
-export class Variables extends PanelWithToolbar {
+export class Variables extends Panel {
   /**
    * Instantiate a new Variables Panel.
    *
    * @param options The instantiation options for a Variables Panel.
    */
   constructor(options: Variables.IOptions) {
-    super(options);
+    super();
+
     const { model, service, commands, themeManager } = options;
     const translator = options.translator || nullTranslator;
     const trans = translator.load('jupyterlab');
-    this.title.label = trans.__('Variables');
-    this.toolbar.addClass('jp-DebuggerVariables-toolbar');
+    this._header = new VariablesHeader(translator);
     this._tree = new VariablesBodyTree({
       model,
       service,
       commands,
       translator
     });
-    this._table = new VariablesBodyGrid({
-      model,
-      commands,
-      themeManager,
-      translator
-    });
+    this._table = new VariablesBodyGrid({ model, commands, themeManager });
     this._table.hide();
 
-    this.toolbar.addItem(
+    this._header.toolbar.addItem(
       'scope-switcher',
       new ScopeSwitcher({
         translator,
@@ -86,16 +86,24 @@
     });
 
     const markViewButtonSelection = (selectedView: string): void => {
-      tableViewButton.pressed = selectedView !== 'tree';
-      treeViewButton.pressed = !tableViewButton.pressed;
+      const viewModeClassName = 'jp-ViewModeSelected';
+
+      if (selectedView === 'tree') {
+        tableViewButton.removeClass(viewModeClassName);
+        treeViewButton.addClass(viewModeClassName);
+      } else {
+        treeViewButton.removeClass(viewModeClassName);
+        tableViewButton.addClass(viewModeClassName);
+      }
     };
 
     markViewButtonSelection(this._table.isHidden ? 'tree' : 'table');
 
-    this.toolbar.addItem('view-VariableTreeView', treeViewButton);
-
-    this.toolbar.addItem('view-VariableTableView', tableViewButton);
-
+    this._header.toolbar.addItem('view-VariableTreeView', treeViewButton);
+
+    this._header.toolbar.addItem('view-VariableTableView', tableViewButton);
+
+    this.addWidget(this._header);
     this.addWidget(this._tree);
     this.addWidget(this._table);
     this.addClass('jp-DebuggerVariables');
@@ -125,10 +133,11 @@
    * @param msg The resize message.
    */
   private _resizeBody(msg: Widget.ResizeMessage): void {
-    const height = msg.height - this.toolbar.node.offsetHeight;
+    const height = msg.height - this._header.node.offsetHeight;
     this._tree.node.style.height = `${height}px`;
   }
 
+  private _header: VariablesHeader;
   private _tree: VariablesBodyTree;
   private _table: VariablesBodyGrid;
 }