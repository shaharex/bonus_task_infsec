--- jupyterlab\browser-test.js (old)
+++ jupyterlab\browser-test.js (new)
@@ -1,8 +1,3 @@
-/*
- * Copyright (c) Jupyter Development Team.
- * Distributed under the terms of the Modified BSD License.
- */
-
 const playwright = require('playwright');
 const path = require('path');
 const fs = require('fs');
@@ -28,7 +23,6 @@
 async function main() {
   /* eslint-disable no-console */
   console.info(`Starting headless ${BROWSER}...`);
-  let testError = null;
 
   const pwBrowser = playwright[BROWSER];
   const browser = await pwBrowser.launch({
@@ -66,12 +60,11 @@
   console.log('Waiting for page content..');
 
   try {
-    await page.locator('#jupyter-config-data').waitFor({ state: 'attached' });
+    await page.locator('#jupyter-config-data').waitFor();
   } catch (reason) {
-    console.error('Error loading JupyterLab page:', reason);
+    console.error('Error loading JupyterLab page:');
     // Limit to 1000 characters
     console.error((await page.content()).substring(0, 1000));
-    testError = reason;
   }
 
   console.log('Waiting for #main selector...');
@@ -83,6 +76,7 @@
     state: 'attached'
   });
   console.log('Waiting for application to start...');
+  let testError = null;
 
   try {
     await page.waitForSelector('.completed', { state: 'attached' });